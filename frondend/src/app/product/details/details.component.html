<div id="product-details">
  <ng-container *ngIf="product">
    <h2>Product: {{product.title}}</h2>
    <img src="{{product.image}}" alt="{{product.title}}" class="details-image"/>
    <p class="justify"><span class="bold">Title:</span><span class="data">{{product.title}}</span></p>
    <p class="justify"><span class="bold">Description:</span><span class="data">{{product.description}}</span></p>
    <p class="justify"><span class="bold">End date:</span><span class="data">{{product.endString}}</span></p>
    <p class="justify"><span class="bold">Start price:</span><span
      class="data">{{product.startPrice | currency}}</span></p>
    <p class="justify"><span class="bold">Current price:</span><span
      class="data">{{product.priceValue | currency}}</span></p>
    <p class="justify"><span class="bold">Creator:</span><span class="data"><a
      href="">{{product.creator.email}}</a>{{product.isOwner ? ' (You) ' : ''}}</span></p>
    <ng-container *ngIf="isLoggedIn">
      <ng-container *ngIf="!product.isOwner">
        <hr>
        <form #bidForm="ngForm" (ngSubmit)="bid(bidForm)">
          <div id="place-bid" class="clearfix">
            <label for="bid" id="bid-label">Place your bid</label>
            <div id="place-bid-input-container">
              <input class="form-control" id="bid" placeholder="Your bid" name="bid" ngModel
                     #bidInput="ngModel"
                     [appMin]="product.priceValue"
                     required/>
              <span *ngIf="bidInput.invalid && bidInput.touched">Bid value must be number greater than {{product.priceValue | currency}}</span>
            </div>
            <div id="place-bid-btn-container">
              <button class="btn btn-primary pull-right" [disabled]="bidForm.invalid">Bid</button>
            </div>
          </div>
        </form>
      </ng-container>
      <ng-container *ngIf="product.isOwner">
        <hr>
        <div id="bid-admin">
          <h3>Administration product</h3>
          <button class="btn btn-danger" id="delete-btn" (click)="deleteHandler(product)">Delete</button>
          <button class="btn btn-warning" id="edit-btn" [routerLink]="['/product', product._id, 'edit']">Edit</button>
        </div>
        <hr>
        <div id="all-bids">
          <h3>All bids</h3>
          <p id="no-bids" *ngIf="product.bids.length === 0">no bids</p>
          <div class="bid" *ngFor="let bid of product.bids">
            <p>Bid value: {{bid.priceValue}}</p>
            <p>Bid from: {{bid.creator.email}}</p>
            <!--            <p>Date: {{bid.}}</p>-->
          </div>
        </div>
      </ng-container>
    </ng-container>
    <br>
  </ng-container>
  <!--  <p>{{product}}</p>-->
  <app-loader [isActive]="!product"></app-loader>
</div>

